{"version":3,"sources":["main.min.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_App","App","run","Object","defineProperty","value","undefined","_Auth","_logger","_settings","_Devices","_SignalDetection","logger","log","DEBUG_DEFAULT_CODE","isReadyToSetUpNewCode","auth","Auth","servo","Servo","pin","settings","servoPin","button","Button","buttonPin","bluetooth","Bluetooth","serialPort","bluetoothSerial","signalDetectionService","SignalDetectionService","onDataReceived","onClick","e","timestamp","time","lastTime","putTimestamp","setCode","onSignalDetect","code","authenticated","verifyCode","move","_classCallCheck","instance","Constructor","TypeError","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","push","length","err","Array","isArray","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","fluctuation","_code$slice","slice","_code$slice2","signalEnd","_code$slice3","_code$slice4","codeEnd","coeff","result","forEach","codeItem","index","stamp","withinRange","Logger","isEnabled","message","arg","txt","console","print","bool","P2","P3","Serial3","_Utils","SERVO_DEFAULT_DURATION","SERVO_DEFAULT_INTERVAL","options","currentInterval","currentPosition","range","offset","position","duration","cb","_this","clearInterval","initialPosition","amt","moveFn","digitalPulse","E","clip","setInterval","SET_WATCH_OPTS_DEFAULT","repeat","debounce","edge","setWatchOpts","setWatch","btnClick","bind","btnClickCallback","callback","DEFAULT_BAUD_RATE","DEFAULT_DEBOUNCE_TIMEOUT","_this2","serial","rate","baudRate","debouceTimeout","debounceTimeout","setup","receivedDataArray","onDataReceivedCallback","onDataReceivedDebounced","_onDataReceived","on","onDataReceiving","data","join","func","wait","immediate","timeoutId","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","CODE_DETECT_TIMEOUT_DEFAULT","codeDetectionTimeout","signalTimestamps","signalDetectionInProgress","updateCodeDetectionDebounced","detectCodeDebounced","onCodeDetected","onSignalDetectCallback","timeout"],"mappings":"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","file":"main.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"main\"] = factory();\n\telse\n\t\troot[\"main\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _App = __webpack_require__(1);\n\t\n\t_App.App.run();\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.App = undefined;\n\t\n\tvar _Auth = __webpack_require__(2);\n\t\n\tvar _logger = __webpack_require__(3);\n\t\n\tvar _settings = __webpack_require__(4);\n\t\n\tvar _Devices = __webpack_require__(5);\n\t\n\tvar _SignalDetection = __webpack_require__(7);\n\t\n\t_logger.logger.log('main.js');\n\t\n\tvar DEBUG_DEFAULT_CODE = [0.11071835714, 0.08259338095, 0.10016359523, 0.30911060714, 0.09569125595, 0.51507855357, 0.07772857142];\n\t\n\tvar App = {\n\t\n\t  run: function run() {\n\t\n\t    var isReadyToSetUpNewCode = false;\n\t\n\t    var auth = new _Auth.Auth();\n\t    var servo = new _Devices.Servo({ pin: _settings.settings.pin.servoPin });\n\t    var button = new _Devices.Button({ pin: _settings.settings.pin.buttonPin });\n\t    var bluetooth = new _Devices.Bluetooth({ serialPort: _settings.settings.pin.bluetoothSerial });\n\t\n\t    var signalDetectionService = new _SignalDetection.SignalDetectionService();\n\t\n\t    bluetooth.onDataReceived(function () {\n\t      _logger.logger.log('ready to set up new code');\n\t      isReadyToSetUpNewCode = true;\n\t    });\n\t\n\t    button.onClick(function (e) {\n\t      // todo: generate timestamp based on `e` arg\n\t      // there is a mistake (e.time - e.lastTime) -> fix it\n\t      var timestamp = e.time - e.lastTime;\n\t      signalDetectionService.putTimestamp(timestamp);\n\t    });\n\t\n\t    // TODO: set the code manually\n\t    auth.setCode(DEBUG_DEFAULT_CODE);\n\t\n\t    signalDetectionService.onSignalDetect(function (code) {\n\t\n\t      _logger.logger.log('code-detected', code);\n\t\n\t      if (isReadyToSetUpNewCode) {\n\t        auth.setCode(code);\n\t        _logger.logger.log('new code has been set');\n\t        isReadyToSetUpNewCode = false;\n\t      } else {\n\t        var authenticated = auth.verifyCode(code);\n\t        _logger.logger.log('authenticated', authenticated);\n\t        servo.move(authenticated ? 0 : 1);\n\t      }\n\t    });\n\t  }\n\t\n\t};\n\t\n\texports.App = App;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Auth = undefined;\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _logger = __webpack_require__(3);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t_logger.logger.log('Auth.js');\n\t\n\tvar Auth = function () {\n\t  function Auth() {\n\t    _classCallCheck(this, Auth);\n\t\n\t    this.code = []; // storing key code, an array of timestamps\n\t    this.fluctuation = 150; // TODO: must be in percents\n\t  }\n\t\n\t  _createClass(Auth, [{\n\t    key: \"setCode\",\n\t    value: function setCode(code) {\n\t      if (!code) return;\n\t      if (!(code instanceof Array)) return;\n\t      this.code = code;\n\t    }\n\t  }, {\n\t    key: \"getCode\",\n\t    value: function getCode() {\n\t      return this.code;\n\t    }\n\t  }, {\n\t    key: \"verifyCode\",\n\t    value: function verifyCode(code) {\n\t      if (!code) return false;\n\t      if (!(code instanceof Array)) return false;\n\t      if (code.length !== this.code.length) return false;\n\t\n\t      var _code$slice = code.slice(-1),\n\t          _code$slice2 = _slicedToArray(_code$slice, 1),\n\t          signalEnd = _code$slice2[0];\n\t\n\t      var _code$slice3 = this.code.slice(-1),\n\t          _code$slice4 = _slicedToArray(_code$slice3, 1),\n\t          codeEnd = _code$slice4[0];\n\t\n\t      var coeff = signalEnd / codeEnd;\n\t      var result = true;\n\t      var fluctuation = this.fluctuation;\n\t      this.code.forEach(function (codeItem, index) {\n\t        var stamp = code[index] / coeff;\n\t        var withinRange = stamp + fluctuation >= codeItem && stamp - fluctuation <= codeItem;\n\t        if (!withinRange) result = false;\n\t      });\n\t\n\t      return result;\n\t    }\n\t  }]);\n\t\n\t  return Auth;\n\t}();\n\t\n\texports.Auth = Auth;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.logger = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _settings = __webpack_require__(4);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * Simplest silly logger for debugging\n\t *\n\t * Actually there is a bug with it.\n\t * For some reason the app is unstable when\n\t * something is pushed into console.log,\n\t * as I found - Espruino waits for recipients for logged data\n\t * and breaks logic if there are no ones\n\t *\n\t * @type {Logger}\n\t */\n\tvar Logger = function () {\n\t  function Logger(bluetoothSerial) {\n\t    _classCallCheck(this, Logger);\n\t\n\t    this.isEnabled = false;\n\t    this.bluetoothSerial = bluetoothSerial;\n\t  }\n\t\n\t  _createClass(Logger, [{\n\t    key: 'log',\n\t    value: function log(message, arg) {\n\t      if (!this.isEnabled) return false;\n\t      var txt = message + ': ' + arg;\n\t      if (console && console.log) console.log(txt);\n\t      if (this.bluetoothSerial) this.bluetoothSerial.print(txt);\n\t    }\n\t  }, {\n\t    key: 'enabled',\n\t    value: function enabled(bool) {\n\t      this.isEnabled = bool;\n\t    }\n\t  }]);\n\t\n\t  return Logger;\n\t}();\n\t\n\tvar logger = new Logger(_settings.settings.pin.bluetoothSerial);\n\t\n\t// TODO: enable when debugging\n\t//logger.enabled(true);\n\t\n\texports.logger = logger;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\t// mocking for testing\n\t// TODO: do not include in prod\n\t// let BTN1 = BTN1 || null;\n\t// let P3 = P3 || null;\n\t// let Serial3 = Serial3 || null;\n\t\n\tvar settings = {\n\t  pin: {\n\t    buttonPin: P2,\n\t    servoPin: P3,\n\t    bluetoothSerial: Serial3\n\t  }\n\t};\n\t\n\texports.settings = settings;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Bluetooth = exports.Button = exports.Servo = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Servo motor utility module\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * example:\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       ```\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         import { Servo } from \"./Devices\";\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         let options = {\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           pin: <Object>, // e,g, P1\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         };\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         let servo = new Servo(options);\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         s.move(1); // moving to position 1 over 1 second\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         s.move(0); // moving to position 0 over 1 second\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         s.move(0.5, 3000); // moving to position 0.5 over 3 seconds\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         // moving to position 0 over 1 second, then move to position 1\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         s.move(0, 1000, function() {\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           s.move(1, 1000);\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         });\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       ```\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */\n\t\n\tvar _logger = __webpack_require__(3);\n\t\n\tvar _Utils = __webpack_require__(6);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t_logger.logger.log('Devices.js');\n\t\n\tvar SERVO_DEFAULT_DURATION = 1000;\n\tvar SERVO_DEFAULT_INTERVAL = 20;\n\t\n\tvar Servo = function () {\n\t  function Servo(options) {\n\t    _classCallCheck(this, Servo);\n\t\n\t    this.pin = options.pin;\n\t    this.currentInterval = null;\n\t    this.currentPosition = null;\n\t    if (options && options.range) {\n\t      this.range = options.range;\n\t      this.offset = 1.5 - options.range / 2;\n\t    } else {\n\t      this.offset = 1;\n\t      this.range = 1;\n\t    }\n\t  }\n\t\n\t  _createClass(Servo, [{\n\t    key: \"move\",\n\t    value: function move(position, duration, cb) {\n\t      var _this = this;\n\t\n\t      if (!duration) duration = SERVO_DEFAULT_DURATION;\n\t      if (!this.currentPosition) this.currentPosition = position;\n\t      if (this.currentInterval) clearInterval(this.currentInterval);\n\t\n\t      var initialPosition = this.currentPosition;\n\t      var amt = 0;\n\t\n\t      var moveFn = function moveFn() {\n\t\n\t        if (amt > 1) {\n\t          clearInterval(_this.currentInterval);\n\t          delete _this.currentInterval;\n\t          amt = 1;\n\t          if (cb) cb();\n\t        }\n\t        _this.currentPosition = position * amt + initialPosition * (1 - amt);\n\t        digitalPulse(_this.pin, 1, _this.offset + E.clip(_this.currentPosition, 0, 1) * _this.range);\n\t        amt += 1000.0 / (SERVO_DEFAULT_INTERVAL * duration);\n\t      };\n\t\n\t      this.currentInterval = setInterval(moveFn, SERVO_DEFAULT_INTERVAL);\n\t    }\n\t  }]);\n\t\n\t  return Servo;\n\t}();\n\t\n\t/**\n\t * Button module\n\t * example: \n\t *\n\t  ```\n\t    import { Button } from \"./Devices\";\n\t    let options = {\n\t      pin: <Object>, // e,g, P1\n\t      setWatchOpts: <Object> // opts passed to setWatch fn\n\t    };\n\t    let btn = new Button(options);\n\t ```\n\t * \n\t */\n\t\n\tvar SET_WATCH_OPTS_DEFAULT = {\n\t  repeat: true,\n\t  debounce: 20,\n\t  edge: 'rising'\n\t};\n\t\n\tvar Button = function () {\n\t  function Button(options) {\n\t    _classCallCheck(this, Button);\n\t\n\t    _logger.logger.log(\"setupButton\");\n\t    var pin = options.pin;\n\t    var setWatchOpts = options.setWatchOpts || SET_WATCH_OPTS_DEFAULT;\n\t    setWatch(this.btnClick.bind(this), pin, setWatchOpts);\n\t  }\n\t\n\t  _createClass(Button, [{\n\t    key: \"btnClick\",\n\t    value: function btnClick(e) {\n\t      _logger.logger.log(\"setupButton btnClick\");\n\t      this.btnClickCallback(e);\n\t    }\n\t  }, {\n\t    key: \"onClick\",\n\t    value: function onClick(callback) {\n\t      this.btnClickCallback = callback || function () {};\n\t    }\n\t  }]);\n\t\n\t  return Button;\n\t}();\n\t\n\t/**\n\t * Bluetooth module\n\t * example:\n\t *\n\t  ```\n\t    import { Bluetooth } from \"./Devices\";\n\t    let options = {\n\t      serialPort: <Object> // e.g. Serial3\n\t      baudRate: <Number> // e.g. 9600 <- this is default\n\t      debounceTimeout: <Number> // e.g. 100 <- this is default\n\t    };\n\t    let bluetooth = new Bluetooth(options);\n\t  ```\n\t *\n\t */\n\tvar DEFAULT_BAUD_RATE = 9600;\n\tvar DEFAULT_DEBOUNCE_TIMEOUT = 100;\n\t\n\tvar Bluetooth = function () {\n\t  function Bluetooth(options) {\n\t    var _this2 = this;\n\t\n\t    _classCallCheck(this, Bluetooth);\n\t\n\t    var serial = options.serialPort;\n\t    var rate = options.baudRate || DEFAULT_BAUD_RATE;\n\t    var debouceTimeout = options.debounceTimeout || DEFAULT_DEBOUNCE_TIMEOUT;\n\t    serial.setup(rate);\n\t\n\t    this.receivedDataArray = [];\n\t    this.onDataReceivedCallback = function () {};\n\t\n\t    this.onDataReceivedDebounced = (0, _Utils.debounce)(function () {\n\t      _this2._onDataReceived();\n\t    }, debouceTimeout);\n\t\n\t    serial.on('data', this.onDataReceiving.bind(this));\n\t  }\n\t\n\t  _createClass(Bluetooth, [{\n\t    key: \"onDataReceiving\",\n\t    value: function onDataReceiving(data) {\n\t      this.receivedDataArray.push(data);\n\t      this.onDataReceivedDebounced();\n\t    }\n\t  }, {\n\t    key: \"_onDataReceived\",\n\t    value: function _onDataReceived() {\n\t      var data = this.receivedDataArray.join(\"\");\n\t      this.onDataReceivedCallback(data);\n\t      this.receivedDataArray = [];\n\t    }\n\t  }, {\n\t    key: \"onDataReceived\",\n\t    value: function onDataReceived(callback) {\n\t      this.onDataReceivedCallback = callback || function () {};\n\t    }\n\t  }]);\n\t\n\t  return Bluetooth;\n\t}();\n\t\n\texports.Servo = Servo;\n\texports.Button = Button;\n\texports.Bluetooth = Bluetooth;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar debounce = function debounce(func, wait, immediate) {\n\t  var timeoutId = null;\n\t  return function () {\n\t    var context = this,\n\t        args = arguments;\n\t    var later = function later() {\n\t      timeoutId = null;\n\t      if (!immediate) func.apply(context, args);\n\t    };\n\t    var callNow = immediate && !timeoutId;\n\t    if (timeoutId) clearTimeout(timeoutId);\n\t    timeoutId = setTimeout(later, wait);\n\t    if (callNow) func.apply(context, args);\n\t  };\n\t};\n\t\n\texports.debounce = debounce;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.SignalDetectionService = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _logger = __webpack_require__(3);\n\t\n\tvar _Utils = __webpack_require__(6);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t_logger.logger.log('signal-detection.js', 'loaded');\n\t\n\t/**\n\t *\n\t * Service that helps to putTimestamp timestamped code\n\t *\n\t */\n\t\n\tvar CODE_DETECT_TIMEOUT_DEFAULT = 2000;\n\t\n\tvar SignalDetectionService = function () {\n\t  function SignalDetectionService() {\n\t    _classCallCheck(this, SignalDetectionService);\n\t\n\t    this.codeDetectionTimeout = CODE_DETECT_TIMEOUT_DEFAULT;\n\t    this.signalTimestamps = [];\n\t    this.signalDetectionInProgress = false;\n\t\n\t    this.updateCodeDetectionDebounced();\n\t  }\n\t\n\t  _createClass(SignalDetectionService, [{\n\t    key: \"updateCodeDetectionDebounced\",\n\t    value: function updateCodeDetectionDebounced() {\n\t      var codeDetectionTimeout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.codeDetectionTimeout || CODE_DETECT_TIMEOUT_DEFAULT;\n\t\n\t      _logger.logger.log('SignalDetectionService.updateCodeDetectionDebounced()', codeDetectionTimeout);\n\t      this.detectCodeDebounced = (0, _Utils.debounce)(this.onCodeDetected.bind(this), codeDetectionTimeout);\n\t    }\n\t\n\t    /**\n\t     * todo: define input, modify the `e` variable taken from espruino's `setWatch` fn\n\t     * @param timestamp\n\t     */\n\t\n\t  }, {\n\t    key: \"putTimestamp\",\n\t    value: function putTimestamp(timestamp) {\n\t      _logger.logger.log('SignalDetectionService.putTimestamp()', timestamp);\n\t      if (this.signalDetectionInProgress) {\n\t        this.signalTimestamps.push(timestamp);\n\t      }\n\t      this.signalDetectionInProgress = true;\n\t      this.detectCodeDebounced();\n\t    }\n\t  }, {\n\t    key: \"onCodeDetected\",\n\t    value: function onCodeDetected() {\n\t      _logger.logger.log(\"SignalDetectionService.onCodeDetected\", 'called');\n\t\n\t      var callback = this.onSignalDetectCallback || function () {};\n\t      callback(this.signalTimestamps);\n\t\n\t      this.signalTimestamps = [];\n\t      this.signalDetectionInProgress = false;\n\t    }\n\t  }, {\n\t    key: \"onSignalDetect\",\n\t    value: function onSignalDetect(callback) {\n\t      this.onSignalDetectCallback = callback; // todo check context\n\t    }\n\t  }, {\n\t    key: \"setDetectionTimeout\",\n\t    value: function setDetectionTimeout(timeout) {\n\t      this.codeDetectionTimeout = timeout;\n\t      this.updateCodeDetectionDebounced();\n\t    }\n\t  }, {\n\t    key: \"getTimestamps\",\n\t    value: function getTimestamps() {\n\t      return this.signalTimestamps;\n\t    }\n\t  }]);\n\t\n\t  return SignalDetectionService;\n\t}();\n\t\n\texports.SignalDetectionService = SignalDetectionService;\n\n/***/ }\n/******/ ])\n});\n;\n"],"sourceRoot":"/source/"}