{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 1332554f77facb600776","webpack:///./src/main.js","webpack:///./src/Locker.js","webpack:///./src/Utils.js","webpack:///./src/Devices.js","webpack:///./src/logger.js","webpack:///./src/settings.js","webpack:///./src/Auth.js"],"names":["logger","log","locker","Locker","settings","pin","auth","Auth","DEFAULT_CODE","setCode","isReadyToSetUpNewCode","on","code","authenticated","verifyCode","servo","move","options","events","servoPin","buttonPin","bluetoothSerial","setupServo","button","setupButton","bluetooth","setupBluetooth","isFirstPress","firstPressTimestamp","signalTimestamps","detection","cb","detectionDebounced","btnClick","e","Date","getTime","timestamp","deltaTime","push","setWatch","repeat","debounce","edge","Servo","serial","setup","receivedDataArray","finishDebounced","join","data","eventName","callback","func","wait","immediate","timeoutId","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","DEFAULT_DURATION","DEFAULT_INTERVAL","currentInterval","currentPosition","range","offset","position","duration","clearInterval","initialPosition","amt","moveFn","digitalPulse","E","clip","setInterval","Logger","message","arg","BTN1","P3","Serial3","fluctuation","Array","length","slice","signalEnd","codeEnd","coeff","result","forEach","codeItem","index","stamp","withinRange"],"mappings":"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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"main\"] = factory();\n\telse\n\t\troot[\"main\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1332554f77facb600776\n **/","import { Locker } from \"./Locker\";\nimport { Auth } from \"./Auth\";\nimport { logger } from \"./logger\";\nimport { settings } from \"./settings\";\n\nlogger.log('main.js');\n\nlet locker = new Locker(settings.pin);\nlet auth = new Auth();\n\n// TODO: set the code manually\nconst DEFAULT_CODE = [189.81586904765, 380.28420238092, 591.84163095231, 1036.09701785712, 1266.62794642860, 1892.38363095244, 2117.92424404760];\nauth.setCode(DEFAULT_CODE);\n\nlet isReadyToSetUpNewCode = false;\n\nlocker.on('code-detected', (code) => {\n\n  logger.log('code-detected', code);\n\n  if (isReadyToSetUpNewCode) {\n    auth.setCode(code);\n    logger.log('new code has been set');\n    isReadyToSetUpNewCode = false;\n  } else {\n    let authenticated = auth.verifyCode(code);\n    logger.log('authenticated', authenticated);\n    locker.servo.move(authenticated ? 0 : 1);\n  }\n});\n\nlocker.on('set-new-code', () => {\n  logger.log('ready to set up new code');\n  isReadyToSetUpNewCode = true;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","import { debounce } from \"./Utils\";\nimport { Servo } from \"./Devices\";\nimport { logger } from \"./logger\";\n\nlogger.log('Locker.js');\n\nconst Locker = class {\n\n  constructor(options){\n\n    this.events = {};\n\n    ({servoPin, buttonPin, bluetoothSerial} = options);\n\n    this.servo = this.setupServo(servoPin);\n    this.button = this.setupButton(buttonPin);\n    this.bluetooth = this.setupBluetooth(bluetoothSerial);\n  }\n\n  setupButton(pin){\n\n    logger.log(\"setupButton\");\n\n    let isFirstPress = false;\n    let firstPressTimestamp = null;\n    let signalTimestamps = [];\n    let detection = () => {\n      logger.log(\"setupButton detection\");\n      isFirstPress = true;\n      let cb = this.events['code-detected'] || (()=>{});\n      cb(signalTimestamps);\n      signalTimestamps = [];\n      firstPressTimestamp = null\n    };\n    let detectionDebounced = debounce(detection, 2000);\n\n    function btnClick(e) {\n\n      logger.log(\"setupButton btnClick\");\n\n      if (isFirstPress) {\n        firstPressTimestamp = (new Date()).getTime();\n        isFirstPress = false;\n      } else {\n        let timestamp = (new Date()).getTime();\n        let deltaTime = timestamp - firstPressTimestamp;\n        signalTimestamps.push(deltaTime);\n        detectionDebounced();\n      }\n\n    }\n\n    // TODO: setWatch doesn't work after reloading\n    setWatch(btnClick, pin, { repeat: true, debounce: 20, edge: 'rising'  });\n\n    return pin;\n\n  }\n\n  setupServo(pin){\n    let servo = new Servo(pin);\n    return servo;\n  }\n\n  setupBluetooth(serial){\n    serial.setup(9600);\n\n    let receivedDataArray = [];\n    const finishDebounced = debounce(()=>{\n      this.events['bluetooth-data-received'](receivedDataArray.join(\"\"));\n      receivedDataArray = [];\n    }, 100);\n\n    serial.on('data', function (data) {\n      receivedDataArray.push(data);\n      finishDebounced();\n    });\n\n    this.on('bluetooth-data-received', (data)=>{\n\n      if (data === \"set\") {\n        this.events['set-new-code']()\n      }\n    })\n  }\n\n  on(eventName, callback){\n    this.events[eventName] = callback;\n  }\n\n};\n\nexport { Locker };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Locker.js\n **/","const debounce = (func, wait, immediate) => {\n  let timeoutId = null;\n  return function() {\n    let context = this, args = arguments;\n    let later = function() {\n      timeoutId = null;\n      if (!immediate) func.apply(context, args);\n    };\n    let callNow = immediate && !timeoutId;\n    if (timeoutId) clearTimeout(timeoutId);\n    timeoutId = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n\nexport { debounce };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Utils.js\n **/","/*\n  Servo motor utility module\n  example:\n\n  ```\n    import { Servo } from \"./Devices\";\n    let servo = new Servo(P3);\n\n    s.move(1); // moving to position 1 over 1 second\n    s.move(0); // moving to position 0 over 1 second\n    s.move(0.5, 3000); // moving to position 0.5 over 3 seconds\n\n    // moving to position 0 over 1 second, then move to position 1\n    s.move(0, 1000, function() {\n      s.move(1, 1000);\n    });\n  ```\n*/\n\nimport { logger } from \"./logger\";\n\nlogger.log('Devices.js');\n\nconst DEFAULT_DURATION = 1000;\nconst DEFAULT_INTERVAL = 20;\nconst Servo = class {\n\n  constructor(pin,options) {\n    this.pin = pin;\n    this.currentInterval = null;\n    this.currentPosition = null;\n    if (options && options.range) {\n      this.range = options.range;\n      this.offset = 1.5 - (options.range / 2);\n    } else {\n      this.offset = 1;\n      this.range = 1;\n    }\n  }\n\n  move(position, duration, cb) {\n\n    if (!duration) duration = DEFAULT_DURATION;\n    if (!this.currentPosition) this.currentPosition = position;\n    if (this.currentInterval) clearInterval(this.currentInterval);\n\n    let initialPosition = this.currentPosition;\n    let amt = 0;\n\n    let moveFn = () => {\n\n      if (amt > 1) {\n        clearInterval(this.currentInterval);\n        delete this.currentInterval;\n        amt = 1;\n        if (cb) cb();\n      }\n      this.currentPosition = position * amt + initialPosition * (1 - amt);\n      digitalPulse(this.pin, 1, this.offset + E.clip(this.currentPosition,0,1) * this.range);\n      amt += 1000.0 / (DEFAULT_INTERVAL * duration);\n\n    };\n\n    this.currentInterval = setInterval(moveFn, DEFAULT_INTERVAL);\n  }\n\n};\n\nexport { Servo };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Devices.js\n **/","import { settings } from './settings';\n\nconst Logger = class {\n\n  constructor (bluetoothSerial) {\n    this.bluetoothSerial = bluetoothSerial;\n  }\n\n  log (message, arg) {\n    // let txt = `${message}: ${arg}`;\n    // if (console && console.log)\n    //   console.log(txt);\n    // if (this.bluetoothSerial)\n    //   this.bluetoothSerial.print(txt);\n  }\n\n};\n\nlet logger = new Logger(settings.pin.bluetoothSerial);\n\nexport { logger };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/logger.js\n **/","const settings = {\n  pin: {\n    buttonPin: BTN1,\n    servoPin: P3,\n    bluetoothSerial: Serial3\n  }\n};\n\nexport { settings };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/settings.js\n **/","import {logger} from \"./logger\";\n\nlogger.log('Auth.js');\n\nconst Auth = class {\n\n  constructor() {\n    this.code = []; // storing key code, an array of timestamps\n    this.fluctuation = 150;\n  }\n\n  setCode(code){\n    if (!code) return;\n    if (!(code instanceof Array)) return;\n    this.code = code;\n  }\n  getCode(){\n    return this.code;\n  }\n\n  verifyCode(code){\n    if (!code) return false;\n    if (!(code instanceof Array)) return false;\n    if (code.length !== this.code.length) return false;\n\n    const [signalEnd] = code.slice(-1);\n    const [codeEnd] = this.code.slice(-1);\n\n    let coeff = signalEnd/codeEnd;\n    let result = true;\n    let fluctuation = this.fluctuation;\n    this.code.forEach( (codeItem, index) => {\n      let stamp = code[index]/coeff;\n      let withinRange = ((stamp + fluctuation) >= codeItem && (stamp - fluctuation) <= codeItem);\n      if (!withinRange)\n        result = false;\n    } );\n\n    return result;\n  }\n\n};\n\nexport { Auth };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Auth.js\n **/"],"sourceRoot":""}